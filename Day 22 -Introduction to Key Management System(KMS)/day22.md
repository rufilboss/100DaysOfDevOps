* What is KMS?

AWS Key Management Service (AWS KMS) is a managed service that makes it easy for you to create and control the encryption keys used to encrypt your data.

* Advantage

    * We can use IAM Policies for KMS access
    * AWS Services(RDS,S3,DynamoDB,EBS…) integrated directly with KMS [**here**](https://docs.aws.amazon.com/kms/latest/developerguide/service-integration.html)
    * It uses FIPS 140–2 compliant hardware module to manage access to key material.
    * Integrated fully with CloudTrail for auditing function

* Concepts

    * KMS stores Customer Master Keys(CMK) which is a logical representation of a key.
    * Key can be generated by KMS or imported.
    * The encrypted data keys are stored with the data
    * CMK never leaves KMS and never leaves a region
    * CMK can encrypt or decrypt data up to 4KB in size.

* How KMS Encrypt Data

![here](https://miro.medium.com/max/700/1*a0bA32jO9PXvwgw76Xmu3w.png)

* Reference: [**here**](https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#enveloping)

* We start with the plain text and then uses data keys along with an algorithm and come up with encrypted data.
* Encrypted data is finally stored in a storage that can be anything(eg:EBS, EFS, S3…)
* KMS then took data key, Encrypt it with a master key along with an encryption algorithm, resulted in it an encrypted data key, that stored alongside with data.

* KMS in action

```sh
# To access KMS
Go to AWS Console --> Security, Identity, & Compliance --> Key Management Service --> Create a key
```

###### NOTE: YAY!!!, Now Key Management Service got its a new home but you can still access it via old way i.e

```sh
AWS Console --> IAM --> Encryption keys
```

#### Step1:

```sh
* Alias: Enter an alias and descrption for the key(eg: Alias: mydemotestkey, similarly Descrption)
* Key material origin: Choose KMS(External: You can bring your own Key(BUOY),CloudHSM(More about it later)
```

#### Step2:

```sh
* Adding Tag is Optional but its a good practice
```

#### Step3:

* Choose the users and roles who can administer this key.
* This is critical as an administrator have right to delete these keys and after that, your data will become unusable

#### Step4:

* Define key usage permissions,select the IAM users and roles that can use the CMK to encrypt and decrypt data with the AWS KMS API

#### Step5:

* Review and edit key policy.